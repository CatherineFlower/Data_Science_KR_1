# Domain DDoS Monitoring ‚Äî Data Science KR 1

> –ù–∞—Å—Ç–æ–ª—å–Ω–æ–µ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å GUI –¥–ª—è **–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ–º–µ–Ω–æ–≤** –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ **–ø–æ–¥—Å—á—ë—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ DDoS-–∞—Ç–∞–∫ –ø–æ –∫–∞–∂–¥–æ–º—É –¥–æ–º–µ–Ω—É –∫–∞–∂–¥—ã–π —á–∞—Å**.  
> –°—Ç–µ–∫: **Python 3.12+, PySide6, PostgreSQL 13+, psycopg2**, –º–æ–¥–µ–ª–∏ –ò–ò –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –∞–Ω–æ–º–∞–ª–∏–π (**IsolationForest + robust z-score**).

---

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã

**–í—Ö–æ–¥**  
![Login](docs/img/login_screen.jpg)

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**  
![Register](docs/img/register_screen.jpg)

**–°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**  
![Domains](docs/img/domains_list_screen.jpg)

**–ü—É—Å—Ç–æ–µ —Ä–∞–±–æ—á–µ–µ –æ–∫–Ω–æ**  
![Main](docs/img/main_empty_screen.jpg)

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞**  
![Add Domain](docs/img/add_domain_dialog.jpg)

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –∏ –¥–∞–Ω–Ω—ã–µ

**ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ (—Å—Ö–µ–º–∞ `app`)**  
![ERD](docs/img/erd_schema.jpg)

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`app_user`)**  
![Users](docs/img/users_table.jpg)

**–î–æ–º–µ–Ω—ã –ø–æ–¥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (`tracked_domain`)**  
![Tracked domains](docs/img/tracked_domains_table.jpg)

**–ü–æ—Ç–æ–∫ –º–µ—Ç—Ä–∏–∫, 5‚Äë–º–∏–Ω—É—Ç–Ω—ã–µ —Å—Ä–µ–∑—ã (`metric_sample`)**  
![Metric sample](docs/img/metric_sample_table.jpg)

**–ñ—É—Ä–Ω–∞–ª —Å–º–µ–Ω —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–æ–º–µ–Ω–∞ (`domain_state_log`)**  
![State log](docs/img/domain_state_log_table.jpg)

---

## üß† –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç –∞–∫–∫–∞—É–Ω—Ç –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç **–¥–æ–º–µ–Ω** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.  
2. –°–µ—Ä–≤–∏—Å —Å–æ–±–∏—Ä–∞–µ—Ç **–º–µ—Ç—Ä–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞** (–∏–∑ –ª–æ–≥–æ–≤ –∏–ª–∏ —ç–º—É–ª—è—Ç–æ—Ä–∞): `packets_per_s`, `uniq_ips`, `bytes_per_s`, `ok` –∏ —Ç. –ø. ‚Äî **–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç**.  
3. –ú–æ–¥—É–ª—å –ò–ò –ø–æ–º–µ—á–∞–µ—Ç 5‚Äë–º–∏–Ω—É—Ç–Ω—ã–µ –æ–∫–Ω–∞ –∫–∞–∫ **–∞–Ω–æ–º–∞–ª—å–Ω—ã–µ**, –µ—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏–ª—å–Ω–æ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è –æ—Ç ¬´–Ω–æ—Ä–º—ã¬ª (—Å–º. –Ω–∏–∂–µ).  
4. –ï—Å–ª–∏ –∑–∞ —á–∞—Å –Ω–∞–±—Ä–∞–ª–æ—Å—å **5 –∏ –±–æ–ª–µ–µ –ø–æ–¥—Ä—è–¥** –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω ‚Äî —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –≤ —ç—Ç–æ—Ç —á–∞—Å –±—ã–ª–∞ **DDoS‚Äë–∞—Ç–∞–∫–∞**.  
5. –í –ë–î –ø–∏—à—É—Ç—Å—è: –ø–æ—á–∞—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –º–∞—Å—Å–∏–≤ ¬´–∫–æ–ª-–≤–æ –∞—Ç–∞–∫ –ø–æ —á–∞—Å–∞–º –¥–Ω—è¬ª, –∏ **–∂—É—Ä–Ω–∞–ª —Å–º–µ–Ω —Å–æ—Å—Ç–æ—è–Ω–∏–π** –¥–æ–º–µ–Ω–∞ (`active` ‚Üî `ddos`) c –¥–µ—Ç–∞–ª—è–º–∏ –º–æ–¥–µ–ª–∏ –≤ `JSONB`.

### –ö–∞–∫ –∏–º–µ–Ω–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É–µ–º –∞—Ç–∞–∫–∏ (–ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º)
- –î–µ—Ä–∂–∏–º **–±–∞–∑–æ–≤—É—é –ª–∏–Ω–∏—é** –¥–ª—è –¥–æ–º–µ–Ω–∞ (–º–µ–¥–∏–∞–Ω–∞ –∏ —Ä–∞–∑–±—Ä–æ—Å MAD –¥–ª—è ¬´—Ç–æ–≥–æ –∂–µ —á–∞—Å–∞ –Ω–µ–¥–µ–ª–∏¬ª).  
- –°—á–∏—Ç–∞–µ–º **robust z-score** –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ–º **Isolation Forest** ‚Äî –µ—Å–ª–∏ —Ö–æ—Ç—å –æ–¥–∏–Ω —Ç—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–ª, –æ–∫–Ω–æ ¬´–∞–Ω–æ–º–∞–ª—å–Ω–æ¬ª.  
- –°–∫–ª–µ–∏–≤–∞–µ–º –ø–æ–¥—Ä—è–¥ –∏–¥—É—â–∏–µ –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞; –¥–ª–∏–Ω–Ω—ã–µ —Å–µ—Ä–∏–∏ —Å—á–∏—Ç–∞–µ–º –∞—Ç–∞–∫–∞–º–∏. –†–∞–∑ –≤ —á–∞—Å –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤–æ–µ —á–∏—Å–ª–æ –∞—Ç–∞–∫.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ë–î (–≤ –¥—É—Ö–µ –∑–∞–¥–∞–Ω–∏—è)

- `app_user` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å‚Äë—Ö—ç—à, —Ä–æ–ª—å).  
- `tracked_domain` ‚Äî –¥–æ–º–µ–Ω—ã –ø–æ–¥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`active`/`ddos`) –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–º–µ–Ω—ã.  
- `metric_sample` ‚Äî **5‚Äë–º–∏–Ω—É—Ç–Ω—ã–µ** —Å—Ä–µ–∑—ã –º–µ—Ç—Ä–∏–∫ –ø–æ –¥–æ–º–µ–Ω—É (–≤–∫–ª—é—á–∞—è –º–∞—Å—Å–∏–≤ IP `inet[]` –∏ `JSONB` —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ò–ò).  
- `domain_state_log` ‚Äî –∂—É—Ä–Ω–∞–ª —Å–º–µ–Ω —Å–æ—Å—Ç–æ—è–Ω–∏—è (`prev_state ‚Üí new_state`) —Å `details JSONB` (–º–æ–¥–µ–ª—å, —Å–∫–æ—Ä –∏ –ø—Ä.).

> –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö: —Ç–µ–∫—Å—Ç–æ–≤—ã–µ, —á–∏—Å–ª–æ–≤—ã–µ, –±—É–ª–µ–≤—ã, `timestamp`, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è ENUM (—Å–æ—Å—Ç–æ—è–Ω–∏—è), –º–∞—Å—Å–∏–≤—ã (`inet[]`), `JSONB`.  
> –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: `NOT NULL`, `UNIQUE`, `CHECK`. –ö–ª—é—á–∏: `PRIMARY KEY`, `FOREIGN KEY` + –≤–∞—Ä–∏–∞–Ω—Ç—ã `ON DELETE/ON UPDATE`.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–æ–≤, —Å–ø–∏—Å–æ–∫ ¬´–ú–æ–∏ –¥–æ–º–µ–Ω—ã¬ª.  
- –ü–æ—á–∞—Å–æ–≤–æ–π –ø–æ–¥—Å—á—ë—Ç –∞—Ç–∞–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ 5‚Äë–º–∏–Ω—É—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫.  
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ë–î —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ **ROLLBACK** –ø—Ä–∏ –æ—à–∏–±–∫–µ.  
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ DDL/DML –∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ INFO/ERROR.  
- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å (Windows/macOS/Linux).

---

## üöÄ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

> –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: Python 3.12+, PostgreSQL 13+

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/CatherineFlower/Data_Science_KR_1
   cd Data_Science_KR_1
   ```
2. –ü–æ–¥–Ω—è—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   python -m venv .venv
   # Windows
   .\.venv\Scripts\pip install -r requirements.txt
   # macOS/Linux
   ./.venv/bin/pip install -r requirements.txt
   ```
3. –°–æ–∑–¥–∞—Ç—å –ë–î –≤ PostgreSQL –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å `.env` –ø–æ –æ–±—Ä–∞–∑—Ü—É `.env.example`.  
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   # Windows
   .\.venv\Scripts\python main.py
   # macOS/Linux
   ./.venv/bin/python main.py
   ```

---

## üß™ –î–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ ‚Üí –≤—Ö–æ–¥ ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞.  
- –ò–º–∏—Ç–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ (—Å–∫—Ä–∏–ø—Ç-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä) ‚Üí –≤ `metric_sample` –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤—Å–ø–ª–µ—Å–∫–∏.  
- –ü–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ ¬´–æ–¥–Ω–æ—á–∞—Å–æ–≤–æ–π¬ª —Å—á—ë—Ç—á–∏–∫ –∞—Ç–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è –∏ –ø–∏—à—É—Ç—Å—è –∑–∞–ø–∏—Å–∏ –≤ `domain_state_log` —Å –¥–µ—Ç–∞–ª—è–º–∏ –º–æ–¥–µ–ª–∏.  
- –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–±–æ—Ç—É –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π: `UNIQUE` –¥–ª—è –¥–æ–º–µ–Ω–∞, `FK` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–∞—Å–∫–∞–¥–∞—Ö, `CHECK` –Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω—ã.

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **GUI**: Python, PySide6  
- **–ë–î**: PostgreSQL (ENUM, –º–∞—Å—Å–∏–≤—ã, JSONB, PK/FK/ON DELETE/ON UPDATE, –∏–Ω–¥–µ–∫—Å—ã)  
- **–î–æ—Å—Ç—É–ø –∫ –ë–î**: psycopg2 (–ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)  
- **ML**: scikit-learn IsolationForest + —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π robust z-score

---

## üë• –ö–æ–º–∞–Ω–¥–∞ –∏ –≤–∫–ª–∞–¥
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –ë–î: —Å—Ö–µ–º–∞, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –∏–Ω–¥–µ–∫—Å—ã, –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ—á–Ω–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏.  
- –ë—ç–∫–µ–Ω–¥/DAO: —Å–ª–æ–π –¥–æ—Å—Ç—É–ø–∞, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç—Ä–∏–∫.  
- ML-–∏–Ω–∂–µ–Ω–µ—Ä: –±–∞–∑–æ–≤–∞—è –ª–∏–Ω–∏—è, IsolationForest, –ª–æ–≥–∏–∫–∞ ¬´—Å–µ—Ä–∏–π –∞–Ω–æ–º–∞–ª–∏–π¬ª.  
- GUI‚Äë–≤–≤–æ–¥: –º–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã (–¥–æ–º–µ–Ω, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Ä–æ–≥–æ–≤).  
- GUI‚Äë–æ—Ç—á—ë—Ç—ã: —Å–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤, —Ç–∞–±–ª–∏—Ü—ã, —Ñ–∏–ª—å—Ç—Ä—ã, —ç–∫—Å–ø–æ—Ä—Ç.  
- QA/Docs: —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, README, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã/–≤–∏–¥–µ–æ.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É—á–µ–±–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ —Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º/–∫–∞—Ñ–µ–¥—Ä–æ–π.
